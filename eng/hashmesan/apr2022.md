# Summary
* Owner: hashmesan
* Dates: 03/29-04/28
* Total: 152 hours
* Overtime: 0 hours
* Github: https://github.com/hashmesan/onebtc, https://github.com/hashmesan/nginx_request_logging, https://github.com/hashmesan/ledger-app-one



| date                                                                                      | work completed with details and links                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    | hours |
|-------------------------------------------------------------------------------------------|------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|-------|
| 3/29                                                                                      | Chrome security weekly meeting:  I pressed the team on pushing educating the community regarding the urgency of the hacks and moving to hardware wallet; As direct result, the team is doing a large marketing campaign to educate users (esp whales) to move toward hardware wallet and practice bettery security procedures; Added a big section on Harmony's blog on moving to Metamask/Ledger wallet.                                                                                                                                | 8     |
| 3/30/2022                                                                                 | Sef Aggregator: (finishing off existing work before going full time on Core projects) development and testing of aggregator protocol;  build out the get balance dynamically for long list of tokens; not trivial since I have to look at windows, and dynamically load them when they're visible.                                                                                                                                                                                                                                       | 4     |
| 3/31/2022                                                                                 | Sef Aggregator: (finishing off existing work before going full time on Core projects) Build out the approve functionality and checking the allowance so token2token swapping work properly. Build test units, and integrate into the UI showing the proper button, progress indication, error                                                                                                                                                                                                                                            | 4     |
| 4/1/2022                                                                                  | Horizen bridge: Investigating best appraoch for issue #22, #28; trimming the headers and implications on what i can be done. Reviewed rainbow bridge.  Sef: spent some time to formulate a long term plan for SEF and spend more time on Harmony core projects. See Documents:  SEF Roadmap                                                                                                                                                                                                                                              | 8     |
| 4/4/2022                                                                                  | 0                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        |       |
| 4/5/2022                                                                                  | 0                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        |       |
| 4/6/2022                                                                                  | Horizen Bridge: setup my local environment code, and ran few of the tools, generating receipt and proof                                                                                                                                                                                                                                                                                                                                                                                                                                  | 8     |
| 4/7/2022                                                                                  | Horizen Bridge: research the proof and verify functions used on the bridge, and understand its structure and compare to existing system; attempted to run the CLI and see how it works                                                                                                                                                                                                                                                                                                                                                   | 8     |
| 4/8/2022                                                                                  | Security: Weekly meeting and reviewing security incidents; reviewed each case, and analyze the logs received from the victims; concluded that most if not all private keys were compromise because we do not see any transaction in the one wallet.                                                                                                                                                                                                                                                                                      | 8     |
| 4/11/2022                                                                                 | 0                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        |       |
| 4/12/2022                                                                                 | Security: pulled Harmony core (golang) to local repo and run local test node; injected some code into the rpc to start logging more data; As it turned out it wasn't easy to do with the golang rpc framework since all the calls are direct and no way to proxy against them to pull the neccessary data; decided to go with nginx proxy method                                                                                                                                                                                         | 4     |
| 4/13/2022                                                                                 | Security: Help jack with logging IPs and RPC data for the harmony nodes to start tracking the attacker ip addresses. Setup harmony node on test node, and analyze the code path to logging. Debugging through different issues with compiling the code and setting the env properly                                                                                                                                                                                                                                                      | 4     |
| 4/13/2022                                                                                 | ledger-app-one: #39 -- setup dev environment, build the code, and setup ledger simulator code, and got the simulator to work properly. Had to fix some docker dep issues with PIP not installing the ledgerblue properly. Added some missing apt-get dependencies. Started to look at the code closer, and provided initial analysis as seen on #39                                                                                                                                                                                      | 4     |
| 4/14/2022                                                                                 | Security: Analyzed the golang code and it turns out it's not a clean way to get the log.  Since we have nginx logs, we can just get it through there, so went ahead with designing the nginx configuration to log in. All work found on https://github.com/hashmesan/nginx_request_logging.   We can get remote ip logging and rpc and properly track the attacker and report to the authority.                                                                                                                                          | 4     |
| 4/14/2022                                                                                 | ledger-app-one: Continued to work on..ledger-app-one issue. Changed the shardID to correct types, and convert with correct sizes, refactor some weird C code to standard C, re-ran all the tests: https://github.com/harmony-one/ledger-app-one/issues/39                                                                                                                                                                                                                                                                                | 4     |
| 4/15/2022                                                                                 | Security: Spoke to Aaron, and Jack, investigating setup of ELB and injestion library on nginx to pull in all the RPC data calls.; reviewed one-btc bridge code for ways to implement staking rewards, and replace feature. Setup my local one-btc environment                                                                                                                                                                                                                                                                            | 8     |
| 4/18/2022                                                                                 | One Bridge: Getting the existing test cases working; Most of them failed on the main branch. There was another branch with correct fixes, I temporary merged those changes in my local environment and started working on liquidation feature.  Created test case to calculate the liquidation ration; wrote the code for liquidation ratio, completed task, and moving to liquidation. However, the contract is reaching some maximum gas limit. I tried moving to 100 million gas limit, still hitting it. Figuring a way around it... | 8     |
| 4/19/2022                                                                                 | One Bridge: Temporary commented out unused replace functions to reduce size, and continued work on liquidation. implemented Collateral liquidation function, and liquidation tests; validated properly working liquidation; push code to new branch; communicationw ith Ganesha; Weekly chrome security meeting. Discussed liquidation reward of one-btc; implemented it, wrote unit test for it.                                                                                                                                        | 8     |
| 4/20/2022                                                                                 | Security: Launched elasticsearch/logstash/kibana nodes to connect RPC data; Got on a call with Jack to coordinate the data ingestion process. I ran in a lot of issues with newer versions of elasticsearch security constraints, and worked through them. Built some basic dashboard to look at the data.                                                                                                                                                                                                                               | 8     |
| 4/21/2022                                                                                 | OneBridge: Moved libraries out to dynamically linked to save space; managed to save 24->21KB by moving two libraries out. https://github.com/harmony-one/onebtc/issues/99                                                                                                                                                                                                                                                                                                                                                                | 4     |
| 4/21/22                                                                                   | Security: coordinated with jack in ingesting new data, fix kibana setup, parse JSON get RPC methods, build few dashboards                                                                                                                                                                                                                                                                                                                                                                                                                | 4     |
| 4/22/2022                                                                                 | Security: spent 2 hrs on AMA Twitter with Harmony to discuss about security; and optimized ES setup   | 2                                                                                                                                                                                                                                                                                                                                                                                                                                  |       |
| 4/22/2022| OneBridge: fork for replacetx, and merged in size-reduce; began analyzing existing code. | 6                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        |       |
| 4/25/2022                                                                                 | Security: discard JSON parse since params are mixed types and it fails mapping, so using regex to parse methods, filtering out non-200 messages, and non relevant messages to optimize space,  ; added 2TB to ES data; ready for ingesting more load                                                                                                                                                                                                                                                                                     | 4     |
| 4/25/2022                                                                                 | OneBridge: rebuilt the size-reduce branch with earlier history; merged size-reduce to replacetx branch to begin work on replace feature; working through the existing code, and test cases to better understand the state of the code                                                                                                                                                                                                                                                                                                    | 4     |
| 4/26/2022                                                                                 | Security: Prototyped in docker elasticcluster upgrade setup from 6 to 7 to gain rollover features; upgrade Elasticsearch cluster to 7 in production; provision a 2nd node in the cluster. Currently, ingesting 700M records per day from 100+ RPC nodes.  Worked with jack to ramp up to 100% on his side. Fixed issue with down time due to jvm settings on logstash; configured system to use transport TLS security across the nodes, and basic security setup; upgraded kibana to have roles/security                                | 12    |
| 4/27/2022                                                                                 | OneBridge: got test cases running, simplify requestIssue and fixed underlying bug with checking for collateral;  fixed the test case  to properly match the griefing amount and most of the test cases now work.                                                                                                                                                                                                                                                                                                                         | 8     |
| 4/28/2022                                                                                 | OneBridge: reviewed vault incentives and provided feedback as seen in the PR; continued to work on replace - fixed existing test cases;  added cancelReplace, test cases, snapshot and revert for testing                                                                                                                                                                                                                                                                                                                                | 8     |
